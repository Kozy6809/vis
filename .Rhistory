str(tgt)
tgt <- as.numeric(unlist(dimnames(table(t$pcode)[table(t$pcode)>2])))
str(tgt)
sapply(tgt[1:10], pci)
sapply(tgt[1:2], pci)
spec<-unique(spec[,-2:-3])
names(spec) <- c("pcode","db","dt","wb","wt","ab","at")
sapply(tgt[1:2], pci)
sapply(tgt[1:10], pci)
?which
which(tgt == 530011)
sapply(tgt[46:56], pci)
pcires <- sapply(tgt[1:10], pci)
pcires <- sapply(tgt[46:56], pci)
pcires <- sapply(tgt[46:56], pci, verbose=F)
pcires
pcires <- sapply(tgt[46:56], pci, verbose=F)
pcires <- sapply(tgt, pci, verbose=F)
View(pcires)
str(pcires)
tgt <- as.numeric(unlist(dimnames(table(t$pcode)[table(t$pcode)>2])))
pcires <- sapply(tgt, pci, verbose=F)
tgt <- as.numeric(unlist(dimnames(table(t$pcode)[table(t$pcode)>3])))
pcires <- sapply(tgt, pci, verbose=F)
tgt <- as.numeric(unlist(dimnames(table(t$pcode)[table(t$pcode)>4])))
pcires <- sapply(tgt, pci, verbose=F)
sapply(tgt, pci)
rratio(553067)
rratio(553066)
rratio(553029)
save.image()
t.org <- t
t <- ss(t, !is.na(dh),)
tgt <- as.numeric(unlist(dimnames(table(t$pcode)[table(t$pcode)>2])))
pcires <- sapply(tgt, pci, verbose=F)
head(pcires)
dfpcires <- data.frame(t(pcires))
View(dfpcires)
ss(t, pcode==544215)
ss(spec, pcode==544215)
ss(spec, pcode==547614)
ss(spec, pcode==547714)
ss(t, pcode==547714)
sd(c(21.7,26.1,26.3))
20/2.6/6
rratio(547714)
rratio(547614)
20/6/3.64
t.org <- t
t <- ss(t, !is.na(dh),)
tgt <- as.numeric(unlist(dimnames(table(t$pcode)[table(t$pcode)>3])))
pcires <- sapply(tgt, pci, verbose=F)
dfpcires <- data.frame(t(pcires))
t <- t.org
ss(t, pcode==533465)
rratio(533465)
ss(spec, pcode==533465)
ss(spec, db==dt,)
nrow(ss(spec, db==dt,))
hist(dfpcires$X2)
hist(dfpcires$X2, br=100)
hist(dfpcires$X2, br=100, xlim=c(0,10))
hist(dfpcires$X2, br=500, xlim=c(0,10))
?within
ti
ti<-within(t, {td <- dl/dh; tw <- wl/wh; ta <- al/ah} )
str(ti)
View(ti)
ti<-within(ti, {tdw <- tw/td; tda <- ta/td})
tapply(ti$tdw, ti$pcode, sd)
hist(tapply(ti$tdw, ti$pcode, sd))
hist(tapply(ti$tdw, ti$pcode, sd), br=200)
hist(tapply(ti$tda, ti$pcode, sd), br=200)
tdwsd <- tapply(ti$tdw, ti$pcode, sd)
tdwsd[tdwsd > 1]
ss(ti, pcode==540043)
ss(ti, pcode==568134)
ti <- within(t, {td <- dl/dh; tw <- wl/wh; ta <- al/ah; tdw <- tw/td; tda <- ta/td})
hist(tapply(ti$tda, ti$pcode, sd), br=200)
?merge
tihwc <- ss(merge(pcode, ti), series=="HWC",)
tihwc <- ss(merge(pcode, ti), series=="HWC", c(pcode, series, name, td, tw, ta, tdw, tda))
View(tihwc)
tihwc <- within(tihwc, {sdtdw <- sd(tdw, na.rm=T); sdtda <- sd(tda, na.rm=T)})
sdtdwhwc <- tapply(tihwc$tdw, tihwc$pcode, sd, na.rm=T)
hist(sdtdwhwc)
sdtdwhwc <- tapply(tihwc$tdw, tihwc$pcode, function(x) sd(x, na.rm=T)/mean(x, na.rm=T))
hist(sdtdwhwc)
head(sdtdwhwc)
hist(sdtdwhwc)
hist(sdtdwhwc, br=100)
sdtdahwc <- tapply(tihwc$tda, tihwc$pcode, function(x) sd(x, na.rm=T)/mean(x, na.rm=T))
hist(sdtdahwc, br=100)
hist(sdtdwhwc, br=100)
sdtdwhwc[sdtdwhwc > 0.1]
t.test(ss(tihwc, pcode==530097, tdw))
t.test(ss(tihwc, pcode==530388, tdw))
head(sdtdwhwc)
ss(tihwc, pcode==530030,)
View(pcode)
sdtdwhwc[is.na(sdtdwhwc)]
ss(tihwc, pcode==530228,)
ss(tihwc, pcode==530552,)
ss(tihwc, pcode==530396,)
tdwsd[tdwsd > 0.5]
tdwsd[tdwsd > 0.5 && !is.na(tdwsd)]
tdwsd[tdwsd > 0.5 & !is.na(tdwsd)]
getVisData()
names(t)<-c("day", "pcode", "lot", "dl", "dh", "wl", "wh", "al", "ah")
hiravisiv<-sqlQuery(ch, "select * from hiravisiv")
library("RODBC")
ch<-odbcConnect("qc")
getVisData()
names(t)<-c("day", "pcode", "lot", "dl", "dh", "wl", "wh", "al", "ah")
hiravisiv<-sqlQuery(ch, "select * from hiravisiv")
names(hiravisiv)[6]<-"day"
t<-merge(hiravisiv, t, all.y=T)
View(hiravisiv)
View(t)
ch<-odbcConnect("qc")
getVisData()
View(t)
rm(t)
ch<-odbcConnect("qc")
getVisData()
str(t)
getVisData()
str(t)
ch<-odbcConnect("qc")
t <- getVisData()
View(t)
names(t)<-c("day", "pcode", "lot", "dl", "dh", "wl", "wh", "al", "ah")
hiravisiv<-sqlQuery(ch, "select * from hiravisiv")
names(hiravisiv)[6]<-"day"
t<-merge(hiravisiv, t, all.y=T)
t.org <- t
t <- ss(t, !is.na(dh),)
tgt <- as.numeric(unlist(dimnames(table(t$pcode)[table(t$pcode)>3])))
pcires <- sapply(tgt, pci, verbose=F)
dfpcires <- data.frame(t(pcires))
t <- t.org
ti <- within(t, {td <- dl/dh; tw <- wl/wh; ta <- al/ah; tdw <- tw/td; tda <- ta/td})
tihwc <- ss(merge(pcode, ti), series=="HWC", c(pcode, series, name, td, tw, ta, tdw, tda))
sdtdw <- tapply(ti$tdw, ti$pcode, function(x) sd(x, na.rm=T)/mean(x, na.rm=T))
sdtdwhwc <- tapply(tihwc$tdw, tihwc$pcode, function(x) sd(x, na.rm=T)/mean(x, na.rm=T))
sdtdahwc <- tapply(tihwc$tda, tihwc$pcode, function(x) sd(x, na.rm=T)/mean(x, na.rm=T))
sdtdw[!is.na(sdtdw) & sdtdw > 1]
library("RODBC")
ch<-odbcConnect("qc")
t <- getVisData()
names(t)<-c("day", "pcode", "lot", "dl", "dh", "wl", "wh", "al", "ah")
hiravisiv<-sqlQuery(ch, "select * from hiravisiv")
names(hiravisiv)[6]<-"day"
t<-merge(hiravisiv, t, all.y=T)
t.org <- t
t <- ss(t, !is.na(dh),)
tgt <- as.numeric(unlist(dimnames(table(t$pcode)[table(t$pcode)>3])))
pcires <- sapply(tgt, pci, verbose=F)
dfpcires <- data.frame(t(pcires))
t <- t.org
ti <- within(t, {td <- dl/dh; tw <- wl/wh; ta <- al/ah; tdw <- tw/td; tda <- ta/td})
tihwc <- ss(merge(pcode, ti), series=="HWC", c(pcode, series, name, td, tw, ta, tdw, tda))
sdtdw <- tapply(ti$tdw, ti$pcode, function(x) sd(x, na.rm=T)/mean(x, na.rm=T))
sdtdwhwc <- tapply(tihwc$tdw, tihwc$pcode, function(x) sd(x, na.rm=T)/mean(x, na.rm=T))
sdtdahwc <- tapply(tihwc$tda, tihwc$pcode, function(x) sd(x, na.rm=T)/mean(x, na.rm=T))
sdtdw[!is.na(sdtdw) & sdtdw > 1]
sdtdw[!is.na(sdtdw) & sdtdw > 0.5]
hist(sdtdwhwc)
hist(sdtdwhwc, br=200)
hist(sdtdwhwc, br=100)
which(sdtdwhwc == max(sdtdwhwc))
max(sdtdwhwc)
max(sdtdwhwc, na.rm=T)
which(sdtdwhwc == max(sdtdwhwc, na.rm=T))
t.test(ss(ti, pcode==530388, tdw))
which(sdtdwhwc == max(sdtdwhwc, na.rm=T))
t.test(ss(ti, pcode==530388, tdw))
which(sdtdwhgc == max(sdtdwhgc, na.rm=T))
tihgc <- ss(merge(pcode, ti), series=="HGC", c(pcode, series, name, td, tw, ta, tdw, tda))
sdtdwhgc <- tapply(tihgc$tdw, tihgc$pcode, function(x) sd(x, na.rm=T)/mean(x, na.rm=T))
sdtdahgc <- tapply(tihgc$tda, tihgc$pcode, function(x) sd(x, na.rm=T)/mean(x, na.rm=T))
which(sdtdwhgc == max(sdtdwhgc, na.rm=T))
which(sdtdwhwc == max(sdtdwhwc, na.rm=T))
t.test(ss(ti, pcode==530388, tdw))
which(sdtdwhgc == max(sdtdwhgc, na.rm=T))
t.test(ss(ti, pcode==535487, tdw))
which(sdtdahwc == max(sdtdahwc, na.rm=T))
t.test(ss(ti, pcode==530601, tda))
which(sdtdahgc == max(sdtdahgc, na.rm=T))
t.test(ss(ti, pcode==535487, tda))
which(sdtdwhwc == max(sdtdwhwc, na.rm=T))
t.test(ss(ti, pcode==530388, tdw))
which(sdtdwhgc == max(sdtdwhgc, na.rm=T))
t.test(ss(ti, pcode==535487, tdw))
which(sdtdahwc == max(sdtdahwc, na.rm=T))
t.test(ss(ti, pcode==530601, tda))
which(sdtdahgc == max(sdtdahgc, na.rm=T))
t.test(ss(ti, pcode==535487, tda))
hist(sdtdwhwc)
hist(sdtdwhwc, br=100)
hist(sdtdwhwc, br=100, xlab="1日と")
hist(sdtdwhwc, br=100, xlab="1週間チクソ/1日チクソの変動係数", main="")
hist(sdtdahwc, br=100, xlab="HWC 促進チクソ/1日チクソの変動係数", main="")
hist(sdtdwhwc, br=100, xlab="HWC 1週間チクソ/1日チクソの変動係数", main="")
hist(sdtdahwc, br=100, xlab="HWC 促進チクソ/1日チクソの変動係数", main="")
hist(sdtdwhgc, br=100, xlab="HGC 1週間チクソ/1日チクソの変動係数", main="")
hist(sdtdahgc, br=100, xlab="HGC 促進チクソ/1日チクソの変動係数", main="")
hist(sdtdwhwc, br=100, xlab="HWC 1週間チクソ/1日チクソの変動係数", main="")
hist(sdtdahwc, br=100, xlab="HWC 促進チクソ/1日チクソの変動係数", main="")
hist(sdtdwhgc, br=100, xlab="HGC 1週間チクソ/1日チクソの変動係数", main="")
hist(sdtdahgc, br=100, xlab="HGC 促進チクソ/1日チクソの変動係数", main="")
View(dfpcires)
names(dfpcires) <- c("pcode","pci","new.db","new.dt")
hist(dfpcires$pci)
hist(dfpcires$pci, br=100, xlim=c(0,10))
hist(dfpcires$pci, br=100, xlim=c(0,5))
hist(dfpcires$pci, br=500, xlim=c(0,5))
hist(dfpcires$pci, br=500, xlim=c(0,5), main="", xlab="工程能力指数")
?hist
hist(dfpcires,plot=F)
hist(dfpcires$pci,plot=F)
hist(dfpcires$pci,br=1:5, plot=F)
hist(dfpcires$pci,br=1:100, plot=F)
hist(dfpcires$pci,br=1:1000, plot=F)
hist(dfpcires$pci,br=0:1000, plot=F)
hist(dfpcires$pci,br=0:10, plot=F)
hist(dfpcires$pci,br=0:60, plot=F)
nospec <- merge(spec, dfpcires)
str(nospec)
View(nospec)
nospec <- nospec[order(nospec$pci),]
library("RODBC")
ch<-odbcConnect("qc")
t <- getVisData()
names(t)<-c("day", "pcode", "lot", "dl", "dh", "wl", "wh", "al", "ah")
hiravisiv<-sqlQuery(ch, "select * from hiravisiv")
names(hiravisiv)[6]<-"day"
t<-merge(hiravisiv, t, all.y=T)
san<-tapply(t$ah, t$pcode, FUN=function(x){out <- boxplot(x, plot=F)$out; out/mean(x, na.rm=T)})
cpy(unlist(san))
spec <- pst()
spec<-unique(spec[,-2:-3])
names(spec) <- c("pcode","db","dt","wb","wt","ab","at")
t.org <- t
t <- ss(t, !is.na(dh),)
tgt <- as.numeric(unlist(dimnames(table(t$pcode)[table(t$pcode)>3])))
pcires <- sapply(tgt, pci, verbose=F)
spec <- pst()
spec<-unique(spec[,-2:-3])
names(spec) <- c("pcode","db","dt","wb","wt","ab","at")
View(spec)
library("RODBC")
library(tidyverse)
ch<-odbcConnect("wakui")
#ペンチングゼリー、クイックベース、HGCを除去
t <- sqlQuery(ch, paste("select n.pcode, day, e10d, e1000d",
"from newvis n inner join pcode p",
"on n.pcode = p.pcode where",
"obsolete = 0 and series <> 'YUJ'",
"and n.pcode not in (536051, 554314, 504601, 504602, 504603, 504604, 504605, 504606, 504607, 544002, 559501)"))
names(t)<-c("pcode", "day", "e10d", "e1000d")
s <- t %>% group_by(pcode) %>% summarise(e10 = mean(e10d, na.rm=T), e1000 = mean(e1000d, na.rm=T))
s %>% ggplot() + geom_point(aes(x=e10, y=e1000))
s <- s %>% mutate(bine10 = cut(e10, 10))
s %>% group_by(bine10) %>% filter(e1000 == max(e1000))
library("RODBC")
library(tidyverse)
ch<-odbcConnect("wakui")
#ペンチングゼリー、クイックベース、HGCを除去
t <- sqlQuery(ch, paste("select n.pcode, day, e10d, e1000d",
"from newvis n inner join pcode p",
"on n.pcode = p.pcode where",
"obsolete = 0 and series <> 'YUJ'",
"and n.pcode not in (536051, 554314, 504601, 504602, 504603, 504604, 504605, 504606, 504607, 544002, 559501)"))
names(t)<-c("pcode", "day", "e10d", "e1000d")
s <- t %>% group_by(pcode) %>% summarise(e10 = mean(e10d, na.rm=T), e1000 = mean(e1000d, na.rm=T))
s %>% ggplot() + geom_point(aes(x=e10, y=e1000))
r <- s %>% mutate(bine10 = cut(e10, 10))
r %>% group_by(bine10) %>% filter(e1000 == max(e1000)) %>% arrange(bine10)
r %>% group_by(bine10) %>% filter(e1000 == min(e1000)) %>% arrange(bine10)
library("RODBC")
library(tidyverse)
ch<-odbcConnect("wakui")
#ペンチングゼリー、クイックベース、HGCを除去
t <- sqlQuery(ch, paste("select n.pcode, day, e10d, e1000d",
"from newvis n inner join pcode p",
"on n.pcode = p.pcode where",
"obsolete = 0 and series <> 'YUJ'",
"and n.pcode not in (536051, 554314, 504601, 504602, 504603, 504604, 504605, 504606, 504607, 544002, 559501, 504069)"))
names(t)<-c("pcode", "day", "e10d", "e1000d")
s <- t %>% group_by(pcode) %>% summarise(e10 = mean(e10d, na.rm=T), e1000 = mean(e1000d, na.rm=T))
s %>% ggplot() + geom_point(aes(x=e10, y=e1000))
r <- s %>% mutate(bine10 = cut(e10, 10))
r %>% group_by(bine10) %>% filter(e1000 == max(e1000)) %>% arrange(bine10)
r %>% group_by(bine10) %>% filter(e1000 == min(e1000)) %>% arrange(bine10)
ss(r, pcode == 500214)
ss(r, pcode == 500214,)
ss(r, pcode == 520630,)
ss(s, pcode == 500214,)
library("RODBC")
library(tidyverse)
ch<-odbcConnect("wakui")
#ペンチングゼリー、クイックベース、HGCを除去
t <- sqlQuery(ch, paste("select n.pcode, series, name, day, e10d, e1000d",
"from newvis n inner join pcode p",
"on n.pcode = p.pcode where",
"obsolete = 0 and series <> 'YUJ'",
"and n.pcode not in (536051, 554314, 504601, 504602, 504603, 504604, 504605, 504606, 504607, 544002, 559501, 504069)"))
names(t)<-c("pcode", "day", "e10d", "e1000d")
s <- t %>% group_by(pcode) %>% summarise(e10 = mean(e10d, na.rm=T), e1000 = mean(e1000d, na.rm=T))
library("RODBC")
library(tidyverse)
ch<-odbcConnect("wakui")
#ペンチングゼリー、クイックベース、HGCを除去
t <- sqlQuery(ch, paste("select n.pcode, series, name, day, e10d, e1000d",
"from newvis n inner join pcode p",
"on n.pcode = p.pcode where",
"obsolete = 0 and series <> 'YUJ'",
"and n.pcode not in (536051, 554314, 504601, 504602, 504603, 504604, 504605, 504606, 504607, 544002, 559501, 504069)"))
names(t)<-c("pcode", "series", "name", "day", "e10d", "e1000d")
s <- t %>% group_by(pcode) %>% summarise(e10 = mean(e10d, na.rm=T), e1000 = mean(e1000d, na.rm=T))
s %>% ggplot() + geom_point(aes(x=e10, y=e1000, color=series))
library("RODBC")
library(tidyverse)
ch<-odbcConnect("wakui")
p <- sqlQuery(ch, "select * from pcode")
#ペンチングゼリー、クイックベース、HGCを除去
t <- sqlQuery(ch, paste("select n.pcode, day, e10d, e1000d",
"from newvis n inner join pcode p",
"on n.pcode = p.pcode where",
"obsolete = 0 and series <> 'YUJ'",
"and n.pcode not in (536051, 554314, 504601, 504602, 504603, 504604, 504605, 504606, 504607, 544002, 559501, 504069)"))
names(t)<-c("pcode", "day", "e10d", "e1000d")
s <- t %>% group_by(pcode) %>% summarise(e10 = mean(e10d, na.rm=T), e1000 = mean(e1000d, na.rm=T))
s %>% inner_join(p) %>% ggplot() + geom_point(aes(x=e10, y=e1000, color=series))
s %>% inner_join(p) %>% filter(series == "HGC")
library("RODBC")
library(tidyverse)
ch<-odbcConnect("wakui")
p <- sqlQuery(ch, "select * from pcode")
#ペンチングゼリー、クイックベース、HGCを除去
t <- sqlQuery(ch, paste("select n.pcode, day, e10d, e1000d",
"from newvis n inner join pcode p",
"on n.pcode = p.pcode where",
"obsolete = 0 and series <> 'YUJ'",
"and n.pcode not in (536051, 536060, 536300, 554314, 504601, 504602, 504603, 504604, 504605, 504606, 504607, 544002, 559501, 504069)"))
names(t)<-c("pcode", "day", "e10d", "e1000d")
s <- t %>% group_by(pcode) %>% summarise(e10 = mean(e10d, na.rm=T), e1000 = mean(e1000d, na.rm=T))
s %>% inner_join(p) %>% ggplot() + geom_point(aes(x=e10, y=e1000, color=series))
s %>% inner_join(p) %>% filter(series == "HAU")
library("RODBC")
library(tidyverse)
ch<-odbcConnect("wakui")
p <- sqlQuery(ch, "select * from pcode")
#ペンチングゼリー、クイックベース、HGCを除去
t <- sqlQuery(ch, paste("select n.pcode, day, e10d, e1000d",
"from newvis n inner join pcode p",
"on n.pcode = p.pcode where",
"obsolete = 0 and series <> 'YUJ'",
"and n.pcode not in (536051, 536060, 536300, 546206, 554314, 504601, 504602, 504603, 504604, 504605, 504606, 504607, 544002, 559501, 504069)"))
names(t)<-c("pcode", "day", "e10d", "e1000d")
s <- t %>% group_by(pcode) %>% summarise(e10 = mean(e10d, na.rm=T), e1000 = mean(e1000d, na.rm=T))
s %>% inner_join(p) %>% ggplot() + geom_point(aes(x=e10, y=e1000, color=series))
s %>% inner_join(p) %>% filter(series == "OIL")
library("RODBC")
library(tidyverse)
ch<-odbcConnect("wakui")
p <- sqlQuery(ch, "select * from pcode")
#ペンチングゼリー、クイックベース、HGC/HAUを除去
t <- sqlQuery(ch, paste("select n.pcode, day, e10d, e1000d",
"from newvis n inner join pcode p",
"on n.pcode = p.pcode where",
"obsolete = 0 and series <> 'YUJ'",
"and n.pcode not in (536051, 536060, 536300, 546206, 554314, 504601, 504602, 504603, 504604, 504605, 504606, 504607, 544002, 559501, 504069)"))
names(t)<-c("pcode", "day", "e10d", "e1000d")
s <- t %>% group_by(pcode) %>% summarise(e10 = mean(e10d, na.rm=T), e1000 = mean(e1000d, na.rm=T))
s %>% inner_join(p) %>% ggplot() + geom_point(aes(x=e10, y=e1000, color=series))
r <- s %>% filter(pcode != 504010) %>% mutate(bine10 = cut(e10, 10))
r %>% group_by(bine10) %>% filter(e1000 == max(e1000)) %>% arrange(bine10)
r %>% group_by(bine10) %>% filter(e1000 == min(e1000)) %>% arrange(bine10)
r <- s %>% filter(pcode != 504010) %>% mutate(bine10 = cut(e10, 10))
r %>% group_by(bine10) %>% filter(e1000 == max(e1000)) %>% arrange(bine10) %>%
inner_join(p)
r <- s %>% filter(pcode != 504010) %>% mutate(bine10 = cut(e10, 10))
r %>% group_by(bine10) %>% filter(e1000 == max(e1000)) %>% arrange(bine10) %>%
inner_join(p) %>% select(-5)
r %>% group_by(bine10) %>% filter(e1000 == min(e1000)) %>% arrange(bine10) %>%
inner_join(p) %>% select(-5)
r <- s %>% filter(pcode != 504010) %>% mutate(bine10 = cut(e10, 5))
r %>% group_by(bine10) %>% filter(e1000 == max(e1000)) %>% arrange(bine10) %>%
inner_join(p) %>% select(-5)
r %>% group_by(bine10) %>% filter(e1000 == min(e1000)) %>% arrange(bine10) %>%
inner_join(p) %>% select(-5)
r <- s %>% filter(pcode != 504010 && pcode != 504200) %>% mutate(bine10 = cut(e10, 5))
r %>% group_by(bine10) %>% filter(e1000 == max(e1000)) %>% arrange(bine10) %>%
inner_join(p) %>% select(-5)
r <- s %>% filter(pcode != 504010 & pcode != 504200) %>% mutate(bine10 = cut(e10, 5))
r %>% group_by(bine10) %>% filter(e1000 == max(e1000)) %>% arrange(bine10) %>%
inner_join(p) %>% select(-5)
r %>% group_by(bine10) %>% filter(e1000 == min(e1000)) %>% arrange(bine10) %>%
inner_join(p) %>% select(-5)
ss(r, pcode == 504070)
ss(r, pcode == 504062)
ss(r, e10 > 153)
s %>% inner_join(p) %>% filter(e10 > 153)
library("RODBC")
library(tidyverse)
ch<-odbcConnect("wakui")
p <- sqlQuery(ch, "select * from pcode")
#ペンチングゼリー、クイックベース、HGC/HAUを除去
t <- sqlQuery(ch, paste("select n.pcode, day, e10d, e1000d",
"from newvis n inner join pcode p",
"on n.pcode = p.pcode where",
"obsolete = 0 and series <> 'YUJ'",
"and n.pcode not in (536051, 536060, 536300, 546206, 554314, 504601, 504602, 504603, 504604, 504605, 504606, 504607, 544002, 559501, 504069)"))
names(t)<-c("pcode", "day", "e10d", "e1000d")
s <- t %>% group_by(pcode) %>% summarise(e10 = mean(e10d, na.rm=T), e1000 = mean(e1000d, na.rm=T))
s %>% inner_join(p) %>% ggplot() + geom_point(aes(x=e10, y=e1000, color=series))
r <- s %>% filter(pcode != 504010 & pcode != 504200) %>% mutate(bine10 = cut(e10, 5))
r %>% group_by(bine10) %>% filter(e1000 == max(e1000)) %>% arrange(bine10) %>%
inner_join(p) %>% select(-5)
library("RODBC")
library(tidyverse)
ch<-odbcConnect("wakui")
p <- sqlQuery(ch, "select * from pcode")
#ペンチングゼリー、クイックベース、HGC/HAUを除去
t <- sqlQuery(ch, paste("select n.pcode, day, e10d, e1000d",
"from newvis n inner join pcode p",
"on n.pcode = p.pcode where",
"obsolete = 0 and series <> 'YUJ'",
"and n.pcode not in (536051, 536060, 536300, 546206, 554314, 504601, 504602, 504603, 504604, 504605, 504606, 504607, 544002, 559501, 504069)"))
names(t)<-c("pcode", "day", "e10d", "e1000d")
s <- t %>% group_by(pcode) %>% summarise(e10 = mean(e10d, na.rm=T), e1000 = mean(e1000d, na.rm=T))
s %>% inner_join(p) %>% ggplot() + geom_point(aes(x=e10, y=e1000, color=series))
r <- s %>% filter(pcode != 504010 & pcode != 504200) %>% mutate(bine10 = cut(e10, 5))
r %>% group_by(bine10) %>% filter(e1000 == max(e1000)) %>% arrange(bine10) %>%
inner_join(p) %>% select(-5)
View(r)
94.75/85.82
2.95/2.48
147.8/137.4
5.805/3.557
95.741/105.166
2.946/2.63
94.75/85.82
2.478/2.588
147.8/143.4
4.583/3.557
scale(pst())
sf(504200)
library("RODBC")
library(tidyverse)
ch<-odbcConnect("wakui")
p <- sqlQuery(ch, "select * from pcode")
#ペンチングゼリー、クイックベース、HGC/HAUを除去
t <- sqlQuery(ch, paste("select n.pcode, day, e10d, e1000d",
"from newvis n inner join pcode p",
"on n.pcode = p.pcode where",
"obsolete = 0 and series <> 'YUJ'",
"and n.pcode not in (536051, 536060, 536300, 546206, 554314, 504601, 504602, 504603, 504604, 504605, 504606, 504607, 544002, 559501, 504069)"))
names(t)<-c("pcode", "day", "e10d", "e1000d")
s <- t %>% group_by(pcode) %>% summarise(e10 = mean(e10d, na.rm=T), e1000 = mean(e1000d, na.rm=T))
s %>% inner_join(p) %>% ggplot() + geom_point(aes(x=e10, y=e1000, color=series))
r <- s %>% filter(pcode != 504010 & pcode != 504200) %>% mutate(bine10 = cut(e10, 5))
r %>% group_by(bine10) %>% filter(e1000 == max(e1000)) %>% arrange(bine10) %>%
inner_join(p) %>% select(-5)
r %>% group_by(bine10) %>% filter(e1000 == min(e1000)) %>% arrange(bine10) %>%
inner_join(p) %>% select(-5)
library("RODBC")
library(tidyverse)
ch<-odbcConnect("wakui")
p <- sqlQuery(ch, "select * from pcode")
#ペンチングゼリー、クイックベース、HGC/HAUを除去
t <- sqlQuery(ch, paste("select n.pcode, day, e10d, e1000d",
"from newvis n inner join pcode p",
"on n.pcode = p.pcode where",
"obsolete = 0 and series <> 'YUJ'",
"and n.pcode not in (536051, 536060, 536300, 546206, 554314, 504601, 504602, 504603, 504604, 504605, 504606, 504607, 544002, 559501, 504069)"))
names(t)<-c("pcode", "day", "e10d", "e1000d")
s <- t %>% group_by(pcode) %>% summarise(e10 = mean(e10d, na.rm=T), e1000 = mean(e1000d, na.rm=T))
s %>% inner_join(p) %>% ggplot() + geom_point(aes(x=e10, y=e1000, color=series))
r <- s %>% filter(pcode != 504010 & pcode != 504200) %>% mutate(bine10 = cut(e10, 5))
r %>% group_by(bine10) %>% filter(e1000 == max(e1000)) %>% arrange(bine10) %>%
inner_join(p) %>% select(-5)
r %>% group_by(bine10) %>% filter(e1000 == min(e1000)) %>% arrange(bine10) %>%
inner_join(p) %>% select(-5)
library("RODBC")
library(tidyverse)
ch<-odbcConnect("wakui")
p <- sqlQuery(ch, "select * from pcode")
#ペンチングゼリー、クイックベース、HGC/HAUを除去
t <- sqlQuery(ch, paste("select n.pcode, day, e10d, e1000d",
"from newvis n inner join pcode p",
"on n.pcode = p.pcode where",
"obsolete = 0 and series <> 'YUJ'",
"and n.pcode not in (536051, 536060, 536300, 546206, 554314, 504601, 504602, 504603, 504604, 504605, 504606, 504607, 544002, 559501, 504069)"))
names(t)<-c("pcode", "day", "e10d", "e1000d")
s <- t %>% group_by(pcode) %>% summarise(e10 = mean(e10d, na.rm=T), e1000 = mean(e1000d, na.rm=T))
s %>% inner_join(p) %>% ggplot() + geom_point(aes(x=e10, y=e1000, color=series))
r <- s %>% filter(pcode != 504010 & pcode != 504200) %>% mutate(bine10 = cut(e10, 5))
r %>% group_by(bine10) %>% filter(e1000 == max(e1000)) %>% arrange(bine10) %>%
inner_join(p) %>% select(-5)
r %>% group_by(bine10) %>% filter(e1000 == min(e1000)) %>% arrange(bine10) %>%
inner_join(p) %>% select(-5)
str(r)
r %>% group_by(bine10) %>% filter(e1000 <= min(e1000) + 1) %>% arrange(bine10) %>%
inner_join(p) %>% select(-5)
r %>% group_by(bine10) %>% filter(e1000 <= min(e1000) + 0.5) %>% arrange(bine10) %>%
inner_join(p) %>% select(-5)
5.7/2.5
c(4.97, 2.06, 15.8, 2.23, 0.7, 16.45, 20, 4.59)*.85001
33.2*.85001
